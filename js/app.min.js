!1===debug&&(window.onload=(()=>{"use strict";"serviceWorker"in navigator&&navigator.serviceWorker.register("./pwa.js")})),window.addEventListener("load",()=>{resize(),window.onresize=(()=>{saveToLocalStorage(),resize(),restoreFromLocalStorage()});const e=document.querySelector(".menu");let t=!1;const o=t=>{e.style.display="show"===t?"block":"none"};window.addEventListener("click",e=>{t&&o("hide"),t=!1}),window.addEventListener("contextmenu",e=>{e.preventDefault();const t={left:e.clientX,top:e.clientY};return n(t),!1});const n=({top:n,left:l})=>{e.style.left=`${l}px`,e.style.top=`${n}px`,o("show"),t=!0};document.addEventListener("mousedown",startDraw),document.addEventListener("mouseup",endDraw),window.addEventListener("mousemove",e=>{t||(e.shiftKey?middleDraw(e,localStorage.getItem("bcolor"),parseInt(localStorage.getItem("font"))+20):middleDraw(e))}),document.onkeydown=(e=>{e.ctrlKey&&88===e.keyCode&&(localStorage.removeItem("board"),resize())}),document.addEventListener("touchstart",startDraw),document.addEventListener("touchend",endDraw),window.addEventListener("touchmove",e=>{if(!t){if(2===e.touches.length&&middleDraw(e.touches[0],localStorage.getItem("bcolor"),parseInt(localStorage.getItem("font"))+20),1===e.touches.length&&middleDraw(e.touches[0]),3===e.touches.length){const t={left:e.touches[0].clientX,top:e.touches[0].clientY};n(t)}5===e.touches.length&&(localStorage.removeItem("board"),resize())}})});const refactor=()=>{localStorage.getItem("font")||localStorage.setItem("font",3),localStorage.getItem("bcolor")||localStorage.setItem("bcolor","black"),localStorage.getItem("fcolor")||localStorage.setItem("fcolor","white")};localStorage.getItem("font")||localStorage.setItem("font",3),localStorage.getItem("bcolor")||localStorage.setItem("bcolor","black"),localStorage.getItem("fcolor")||localStorage.setItem("fcolor","white");let coordinate={x:0,y:0},draw=!1;const board=document.getElementById("board");board.style.backgroundColor=localStorage.getItem("bcolor");const modal=document.getElementById("modal"),close=document.getElementsByClassName("close")[0];close.onclick=function(){modal.style.display="none",document.getElementById("about").style.display="none",document.getElementById("help").style.display="none",document.getElementById("setting").style.display="none"};const ctx=board.getContext("2d");ctx.globalCompositeOperation="destination-over";const downland=()=>{const e=document.createElement("a"),t=`board${(new Date).toLocaleString()}.png`;e.download=t,e.href=board.toDataURL(),e.click()},menuItem=e=>{let t=e.getAttribute("content");const o=document.getElementsByClassName("modal-heading")[0];document.getElementsByClassName("modal-body")[0],document.getElementsByClassName("modal-footer")[0];if("download"==t&&downland(),"about"==t&&(o.innerHTML="About",modal.style.display="block",document.getElementById("about").style.display="block",document.getElementById("version").innerHTML=version,modal.style.display="block"),"help"==t&&(o.innerHTML="Help",document.getElementById("help").style.display="block",modal.style.display="block"),"setting"==t){o.innerHTML="Settings",document.getElementById("setting").style.display="block",document.getElementById("font").value=localStorage.getItem("font");const e=document.getElementById("fcolor"),t=document.getElementById("bcolor");e.innerHTML="",t.innerHTML="";for(let o of Object.keys(colors)){let n=document.createElement("option");n.value=colors[o],n.innerHTML=o,o==localStorage.getItem("bcolor")&&n.setAttribute("selected",!0),t.appendChild(n),(n=document.createElement("option")).value=colors[o],n.innerHTML=o,o==localStorage.getItem("fcolor")&&n.setAttribute("selected",!0),e.appendChild(n)}const n=document.getElementById("save");modal.style.display="block",n.onclick=(o=>{const n=document.getElementById("font").value,l=e.options[e.selectedIndex].value,a=t.options[t.selectedIndex].value;if(l!=a&&n>=1)console.log(a),localStorage.setItem("bcolor",a),localStorage.setItem("fcolor",l),localStorage.setItem("font",n),close.click(),board.style.backgroundColor=localStorage.getItem("bcolor");else{const e="Wrong input are given";document.getElementById("error").innerText=e}})}},saveToLocalStorage=()=>{let e={image:board.toDataURL(),date:Date.now()},t=JSON.stringify(e);localStorage.setItem("board",t)},restoreFromLocalStorage=()=>{if(localStorage.getItem("board")){let t=JSON.parse(localStorage.getItem("board")).image;var e=new Image;e.onload=function(){ctx.drawImage(e,0,0)},e.src=t}},resize=()=>{ctx.canvas.width=window.innerWidth,ctx.canvas.height=window.innerHeight,(window.fullScreen||window.innerWidth==screen.width&&window.innerHeight==screen.height)&&(ctx.canvas.width=window.screen.width,ctx.canvas.height=window.screen.height)},position=e=>{coordinate.x=e.clientX-board.offsetLeft,coordinate.y=e.clientY-board.offsetTop},startDraw=e=>{draw=!0,position(e)},endDraw=()=>{draw=!1},middleDraw=(e,t=localStorage.getItem("fcolor"),o=localStorage.getItem("font"))=>{draw&&(ctx.beginPath(),ctx.lineWidth=o,ctx.lineCap="round",ctx.strokeStyle=t,ctx.setLineDash([]),ctx.moveTo(coordinate.x,coordinate.y),position(e),ctx.lineTo(coordinate.x,coordinate.y),ctx.stroke())};