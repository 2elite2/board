<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8" />
    <!-- viewport to disable zoom -->
    <meta name="viewport" content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' />
    <!-- for device that can't use viewport -->
    <meta name="HandheldFriendly" content="true" />
    <link rel="stylesheet" href="style.css">
    <title>Board</title>
</head>
<body>

<canvas id="board">

</canvas>
<script>
    let coordinate = {x: 0, y: 0};
    window.addEventListener('load', () => {
        resize(); // Resizes the canvas once the window loads
        document.addEventListener('mousedown', start);
        document.addEventListener('mouseup', stop);
        window.addEventListener("mousemove", (e) => {
            if (e.shiftKey)
                paint(e, "black", 50)
            else
                paint(e)
        });

        document.addEventListener('touchstart', start);
        document.addEventListener('touchend', stop);
        window.addEventListener("touchmove", (e) => {
            if (e.touches.length === 2)
                paint(e.touches[0], "black", 50)
            else
                paint(e.touches[0])
        });

        document.getElementById('board').addEventListener('touchstart',
            (e) => {
                e.stopPropagation()
            }, false);

        //window.addEventListener('resize', resize);

    })
    const board = document.getElementById("board");
    const ctx = board.getContext("2d");
    const resize = () => {
        ctx.canvas.width = window.innerWidth;
        ctx.canvas.height = window.innerHeight;
    }
    let draw = false;
    position = (e) => {
        coordinate.x = e.clientX - board.offsetLeft;
        coordinate.y = e.clientY - board.offsetTop;
    }
    start = (e) => {
        draw = true;
        position(e);
    }
    stop = () => {
        draw = false;
    }
    paint = (e, color = "white", width = 3) => {
        if (!draw) return;
        ctx.beginPath();
        //console.log("Start Draw!!", e.center.x, e.center.y);

        ctx.lineWidth = width;

        // Sets the end of the lines drawn
        // to a round shape.
        ctx.lineCap = 'round';

        ctx.strokeStyle = color;

        // The cursor to start drawing
        // moves to this coordinate.
        ctx.moveTo(coordinate.x, coordinate.y);

        // The position of the cursor
        // gets updated as we move the
        // mouse around.
        position(e);

        // A line is traced from start
        // coordinate to this coordinate
        ctx.lineTo(coordinate.x , coordinate.y);

        // Draws the line.
        ctx.stroke();

    }
</script>
</body>
</html>